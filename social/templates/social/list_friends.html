{% extends "./base.html" %}
{% load bootstrap4 %}

{% block content %}
    <h1>Friends List </h1>
    <table>
      <tr><th>Your Friends:</th></tr>
      {% for appuser in appusers %}
      <tr>
          {% if appuser.user != user%}
          <td><img src="../static/media/user_placeholder.jpg" alt="Avatar" width="40px" height="40px"></td>
          <td>{{appuser.user.username}}</td> 
          <td>{{appuser.organisation}}</td>   
          <td>Chat: </td>       
          <td><input id="room-name-input" value= {{appuser.user.username}}_{{user.username}}></td>
          <td><input id="room-name-submit" type="button" value="Enter"></td>
          {%endif %}
      </tr>   
      {% endfor %}
      <script>
          document.querySelector('#room-name-input').focus();
            document.querySelector('#room-name-input').onkeyup = function(e) {
            if (e.keyCode === 13) {  // enter, return
                document.querySelector('#room-name-submit').click();
            }
          };
          document.querySelector('#room-name-submit').onclick = function(e) {
            var roomName = document.querySelector('#room-name-input').value;
            window.location.pathname = '/' + roomName + '/';
        };
      </script>  

    </table>
{% endblock %}
